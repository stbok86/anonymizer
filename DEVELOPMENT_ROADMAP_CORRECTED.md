# –°–ö–û–†–†–ï–ö–¢–ò–†–û–í–ê–ù–ù–´–ô –ü–õ–ê–ù: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è 

## üéØ **–ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞):**

```
/project-root
  /gateway                    ‚úÖ –ì–û–¢–û–í
    /app
    requirements.txt
  /orchestrator              ‚úÖ –ì–û–¢–û–í  
    /app  
    requirements.txt
  /unified_document_service  ‚úÖ –ß–ê–°–¢–ò–ß–ù–û (–µ—Å—Ç—å Block Builder)
    /app
      /main.py              
      /block_builder.py     ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù
      /document_io.py       ‚úÖ –ó–ê–ì–û–¢–û–í–ö–ê
    /modules
    /test_docs
    requirements.txt
  /nlp_service              ‚úÖ –ì–û–¢–û–í (–∫–∞—Ä–∫–∞—Å)
    /app
    requirements.txt
  /rule_engine              ‚úÖ –ì–û–¢–û–í (–∫–∞—Ä–∫–∞—Å)
    /app
    requirements.txt
  /frontend                 ‚úÖ –ì–û–¢–û–í (Streamlit)
  start_*.bat —Ñ–∞–π–ª—ã         ‚úÖ –ì–û–¢–û–í–´
```

## ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∫ –ø–ª–∞–Ω—É:**

### 1. **–§–∞–∑–∞ 1 - –í–´–ü–û–õ–ù–ï–ù–ê** ‚úÖ
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û: Python 3.11, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ FastAPI –∫–∞—Ä–∫–∞—Å—ã –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚úÖ Health-check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞

### 2. **–§–∞–∑–∞ 2 - –í –ü–†–û–¶–ï–°–°–ï** üîÑ 
**Unified Document Service - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**

**‚úÖ –≠—Ç–∞–ø 2.1 –í–´–ü–û–õ–ù–ï–ù:**
- Block Builder —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- /parse_docx_blocks endpoint —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –û–±—Ö–æ–¥ paragraphs, tables —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

**‚ùå –¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò:**
- Rule Engine Adapter (–≠—Ç–∞–ø 2.2)
- Formatter & Applier (–≠—Ç–∞–ø 2.3)  
- Replacement Ledger (–≠—Ç–∞–ø 2.4)

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤:**

**–í –ø–ª–∞–Ω–µ —É–∫–∞–∑–∞–Ω–æ:**
- `/anonymization` ‚Üí **–†–ï–ê–õ–¨–ù–û:** `/unified_document_service`
- `/deanonymization` ‚Üí **–†–ï–ê–õ–¨–ù–û:** —Ñ—É–Ω–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ `/unified_document_service`

### 4. **–¢–µ–∫—É—â–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è:**

#### üéØ **–§–∞–∑–∞ 2.2 (–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì–ò):**
```python
# –í unified_document_service/app/ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- rule_adapter.py     # Rule Engine Adapter  
- nlp_adapter.py      # NLP Service Adapter
- formatter.py        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω
- replacement_ledger.py # –£—á–µ—Ç –∑–∞–º–µ–Ω
```

#### üéØ **–§–∞–∑–∞ 3 - NLP Service:**
- –¢–µ–∫—É—â–∏–π NLP Service - —Ç–æ–ª—å–∫–æ –∫–∞—Ä–∫–∞—Å
- –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è spaCy + —Ä—É—Å—Å–∫–∞—è –º–æ–¥–µ–ª—å
- –°–æ–∑–¥–∞–Ω–∏–µ /analyze endpoint

#### üéØ **–§–∞–∑—ã 4-8 –∞–∫—Ç—É–∞–ª—å–Ω—ã** –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ –ø–ª–∞–Ω–µ

## üìã **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞:**

**–¢–ï–ö–£–©–ï–ï –ü–û–õ–û–ñ–ï–ù–ò–ï:** –ö–æ–Ω–µ—Ü –§–∞–∑—ã 1, –Ω–∞—á–∞–ª–æ –§–∞–∑—ã 2

**–û–¶–ï–ù–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò:**
- **–§–∞–∑–∞ 1:** 100% ‚úÖ
- **–§–∞–∑–∞ 2:** 25% (Block Builder –≥–æ—Ç–æ–≤) üîÑ
- **–§–∞–∑—ã 3-8:** 0% ‚è≥

## üöÄ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

### –ù–µ–¥–µ–ª—è 1: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Unified Document Service
1. **Rule Engine Adapter** - –ø–æ–∏—Å–∫ –ø–æ Excel —à–∞–±–ª–æ–Ω–∞–º
2. **–ë–∞–∑–æ–≤—ã–µ –∑–∞–º–µ–Ω—ã** - regex –ø–æ–∏—Å–∫ –Ω–æ–º–µ—Ä–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **Replacement Ledger** - Excel —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–º–µ–Ω

### –ù–µ–¥–µ–ª—è 2: NLP Service
1. **spaCy –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ä—É—Å—Å–∫–∞—è –º–æ–¥–µ–ª—å  
2. **NER –¥–ª—è –§–ò–û** - –±–∞–∑–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
3. **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å Unified Document Service

### –ù–µ–¥–µ–ª–∏ 3-4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ Frontend
1. **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏**
2. **Streamlit UI** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
3. **–°–∫–≤–æ–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

## ‚úÖ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –∞–Ω–∞–ª–∏–∑—É:**

**–ü–ª–∞–Ω –≤ —Ü–µ–ª–æ–º –ö–û–†–†–ï–ö–¢–ï–ù**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è:
1. –ù–∞–∑–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
2. –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å (–§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞)
3. –ß–∞—Å—Ç–∏—á–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Block Builder

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω –∫–∞–∫ –¥–æ—Ä–æ–∂–Ω—É—é –∫–∞—Ä—Ç—É, –Ω–∞—á–∏–Ω–∞—è —Å –§–∞–∑—ã 2.2 (Rule Engine Adapter).