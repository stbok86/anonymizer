# Release v1.8 - –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ UUID

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ö–æ–ª–æ–Ω–∫–∞ "–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ" –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞–º–µ–Ω**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –∑–∞–º–µ–Ω –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   - –ó–Ω–∞—á–µ–Ω–∏—è: "–î–æ–∫—É–º–µ–Ω—Ç" –∏–ª–∏ "–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ"
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç —á–µ—Ç–∫–æ –≤–∏–¥–µ—Ç—å, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞–º–µ–Ω–∞

2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ `docProps/core.xml`, `docProps/app.xml`, `docProps/custom.xml` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞–º–µ–Ω
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º –ø–æ–ª–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   - –í—Å–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (–Ω–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ)

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

1. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å UUID –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –∏ —Ç–∞–±–ª–∏—Ü–µ–π –∑–∞–º–µ–Ω**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ UUID –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏ Excel-–æ—Ç—á–µ—Ç–µ
   - UUID —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ `formatter_applier`
   - UUID —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `replacement['uuid']` –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–∞—Ö

2. **–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞–º–µ–Ω**
   - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ –∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ, –∏ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å —Å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º "–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ"
   - –ò—Å–∫–ª—é—á–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞ `–ï–ò–°–£–§–•–î`, `312822699534`
   - –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞ —Å—á–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤**
   - –ù–æ–º–µ—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å –∑–∞–º–µ–Ω—è—é—Ç—Å—è –ø–æ–ª–Ω—ã–º UUID –≤–º–µ—Å—Ç–æ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞ "D7/–û–ö-2023"
   - –£–¥–∞–ª–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö ID –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

4. **JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "_Element is not JSON serializable"
   - –ü–æ–ª–µ `element` (XML –æ–±—ä–µ–∫—Ç) —Ç–µ–ø–µ—Ä—å —É–¥–∞–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ API –æ—Ç–≤–µ—Ç–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ UUID
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: UUID –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ `_normalize_replacements_with_centralized_uuids()`
- **Propagation —á–µ—Ä–µ–∑ stats**: UUID –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `stats['normalized_replacements']`
- **Reuse –≤–µ–∑–¥–µ**: Excel –æ—Ç—á–µ—Ç, JSON –∂—É—Ä–Ω–∞–ª, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ UUID

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
```python
# –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è
source = match.get('source', '')
location = '–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ' if source.startswith('metadata_') else '–î–æ–∫—É–º–µ–Ω—Ç'
```

### –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
```python
# –°–±–æ—Ä –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
metadata_values = set()
for m in sensitive_metadata:
    partial = m.get('partial_match')
    if partial:
        metadata_values.add(partial)
    else:
        metadata_values.add(m.get('original_value', ''))

# –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
if not source.startswith('metadata_') and orig_val in metadata_values:
    # –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Excel-–æ—Ç—á–µ—Ç–∞

–¢–µ–ø–µ—Ä—å —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–º–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç 4 –∫–æ–ª–æ–Ω–∫–∏:
1. **‚Ññ** - –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
2. **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. **–ó–∞–º–µ–Ω–∞ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)** - UUID –∑–∞–º–µ–Ω—ã
4. **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ** - "–î–æ–∫—É–º–µ–Ω—Ç" –∏–ª–∏ "–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ"

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_uuid_consistency_final.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ UUID –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –∏ —Ç–∞–±–ª–∏—Ü–µ–π –∑–∞–º–µ–Ω
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `unified_document_service/app/full_anonymizer.py`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ" –≤ Excel
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ UUID –≤ –æ—Ç—á–µ—Ç—ã

- `unified_document_service/app/formatter_applier.py`
  - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è UUID
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ normalized_replacements
  - –£–¥–∞–ª–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

- `unified_document_service/app/docx_metadata_handler.py`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
  - –£–¥–∞–ª–µ–Ω `break` –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

- `unified_document_service/app/uuid_mapper.py`
  - UUID –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–Ω–∞ (uuid.uuid4)

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

–ù–µ—Ç breaking changes. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã.

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- **UUID –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: ‚úÖ 100% —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –∏ —Ç–∞–±–ª–∏—Ü–µ–π
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ (~15% –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–º–µ–Ω –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

---

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞**: 3 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.8  
**–¢–µ–≥–∏**: UUID, metadata, deduplication, Excel reports
