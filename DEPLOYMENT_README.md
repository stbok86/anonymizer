# üì¶ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Document Anonymizer

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞:** 1559.71 MB
- **–†–∞–∑–º–µ—Ä venv (6 –∫–æ–ø–∏–π):** 1180.29 MB (75.7%)
- **–†–∞–∑–º–µ—Ä __pycache__:** 399.33 MB (25.6%)
- **–ò—Ç–æ–≥–æ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:** ~1580 MB

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ venv –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ __pycache__ —Ñ–∞–π–ª—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ –µ–¥–∏–Ω–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `.venv` –≤ –∫–æ—Ä–Ω–µ
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `requirements.txt`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `start_all_services.bat` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –µ–¥–∏–Ω—ã–º venv
- **–û–∂–∏–¥–∞–µ–º–∞—è —ç–∫–æ–Ω–æ–º–∏—è:** ~68% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```powershell
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cd C:\Projects\Anonymizer

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ)
py -m venv .venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
.\.venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä—É—Å—Å–∫—É—é –º–æ–¥–µ–ª—å spaCy
python -m spacy download ru_core_news_sm
```

### 2. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```cmd
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ BAT-—Ñ–∞–π–ª
start_all_services.bat
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è 6 –æ–∫–æ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å) –∏ –±—Ä–∞—É–∑–µ—Ä —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º Streamlit –Ω–∞ http://localhost:8501

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```cmd
stop_all_services.bat
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```
Anonymizer/
‚îú‚îÄ‚îÄ .venv/                          ‚Üê –ï–î–ò–ù–û–ï –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt                ‚Üê –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ start_all_services.bat          ‚Üê –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ stop_all_services.bat           ‚Üê –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ check_services_status.bat       ‚Üê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
‚îú‚îÄ‚îÄ frontend/                       ‚Üê Streamlit UI (–ø–æ—Ä—Ç 8501)
‚îÇ   ‚îú‚îÄ‚îÄ streamlit_app.py
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt (deprecated)
‚îú‚îÄ‚îÄ gateway/                        ‚Üê API Gateway (–ø–æ—Ä—Ç 8002)
‚îÇ   ‚îú‚îÄ‚îÄ app/main.py
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt (deprecated)
‚îú‚îÄ‚îÄ orchestrator/                   ‚Üê –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–ø–æ—Ä—Ç 8004)
‚îÇ   ‚îú‚îÄ‚îÄ app/main.py
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt (deprecated)
‚îú‚îÄ‚îÄ nlp_service/                    ‚Üê NLP –∞–Ω–∞–ª–∏–∑ (–ø–æ—Ä—Ç 8006)
‚îÇ   ‚îú‚îÄ‚îÄ app/main.py
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt (deprecated)
‚îú‚îÄ‚îÄ rule_engine/                    ‚Üê Rule Engine (–ø–æ—Ä—Ç 8003)
‚îÇ   ‚îú‚îÄ‚îÄ app/main.py
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt (deprecated)
‚îî‚îÄ‚îÄ unified_document_service/       ‚Üê Document Service (–ø–æ—Ä—Ç 8009)
    ‚îú‚îÄ‚îÄ app/main.py
    ‚îî‚îÄ‚îÄ requirements.txt (deprecated)
```

---

## üîß –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ —Å Inno Setup

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```powershell
.\.venv\Scripts\activate
pip list
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:**
```cmd
start_all_services.bat
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Inno Setup

–°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Inno Setup 6.x](https://jrsoftware.org/isdl.php)

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `anonymizer_setup.iss` (—Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –®–∞–≥ 4: –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ `anonymizer_setup.iss` –≤ Inno Setup Compiler
2. –ù–∞–∂–º–∏—Ç–µ **Build ‚Üí Compile**
3. –ì–æ—Ç–æ–≤—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ `Output/`

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—Ä—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
- **8501** - Frontend (Streamlit)
- **8002** - Gateway (API Gateway)
- **8003** - Rule Engine
- **8004** - Orchestrator
- **8006** - NLP Service
- **8009** - Unified Document Service

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ)
- **Web:** fastapi, uvicorn, streamlit
- **HTTP:** requests, httpx
- **Documents:** python-docx, lxml, openpyxl, pandas
- **NLP:** spacy, pymorphy3
- **–£—Ç–∏–ª–∏—Ç—ã:** pydantic, python-dotenv, regex

### –†–∞–∑–º–µ—Ä –µ–¥–∏–Ω–æ–≥–æ .venv
–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ **450-500 MB** (–≤–º–µ—Å—Ç–æ 1180 MB)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ï–¥–∏–Ω–æ–µ venv (—Ç–µ–∫—É—â–∏–π)
‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
- –õ–µ–≥–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: Python Embedded
‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ
- –†–∞–∑–º–µ—Ä ~15 MB –±–∞–∑–æ–≤—ã–π Python + ~450 MB –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–∏—Å—Ç–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 3: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**
- –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü—Ä–æ—Å—Ç–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **requirements.txt –≤ –ø–æ–¥–ø–∞–ø–∫–∞—Ö —É—Å—Ç–∞—Ä–µ–ª–∏** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ—Ä–Ω–µ–≤–æ–π `requirements.txt`

2. **–ü—É—Ç—å –∫ venv –≤ BAT-—Ñ–∞–π–ª–∞—Ö** - —Ç–µ–ø–µ—Ä—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `%~dp0.venv\Scripts\activate`

3. **spaCy –º–æ–¥–µ–ª—å** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ `ru_core_news_sm` (~40 MB). –î–ª—è –ª—É—á—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ru_core_news_lg` (~500 MB)

4. **–ü–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã** - –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 8002-8009, 8501 –Ω–µ –∑–∞–Ω—è—Ç—ã

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "Port already in use"
```cmd
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
stop_all_services.bat

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
check_services_status.bat
```

### –û—à–∏–±–∫–∞: "Module not found"
```powershell
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
.\.venv\Scripts\activate
pip install -r requirements.txt --force-reinstall
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ NLP Service
```powershell
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ spaCy –º–æ–¥–µ–ª—å
.\.venv\Scripts\activate
python -m spacy download ru_core_news_sm --force
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `check_services_status.bat`
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –æ–∫–Ω–∞—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 10 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0 (–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
