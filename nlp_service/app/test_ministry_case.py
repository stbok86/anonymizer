import re

# Тестовые варианты в разных падежах
texts = [
    "МИНИСТЕРСТВО ИНФОРМАЦИОННОГО РАЗВИТИЯ И СВЯЗИ",  # Именительный (uppercase)
    "Министерство информационного развития и связи",  # Именительный
    "Министерства информационного развития и связи",  # Родительный
    "Начальник управления цифровых технологий Министерства информационного развития и связи Пермского края",
]

current_pattern = r"\b(Министерство|министерство|Департамент|департамент|Управление|управление|Агентство|агентство|Служба|служба)\s+[а-яёА-ЯЁ\s]+"

fixed_pattern = r"\b(Министерств[оа]|министерств[оа]|Департамент[а]?|департамент[а]?|Управлени[ея]|управлени[ея]|Агентств[оа]|агентств[оа]|Служб[аы]|служб[аы])\s+[а-яёА-ЯЁ\s]+"

print("=" * 80)
print("ТЕКУЩИЙ ПАТТЕРН (без учёта падежей):")
print(current_pattern)
print("=" * 80)

for text in texts:
    print(f"\nТекст: '{text}'")
    matches = list(re.finditer(current_pattern, text))
    if matches:
        for m in matches:
            print(f"  ✅ Найдено: '{m.group()}'")
    else:
        print(f"  ❌ НЕ НАЙДЕНО")

print("\n" + "=" * 80)
print("ИСПРАВЛЕННЫЙ ПАТТЕРН (с учётом падежей):")
print(fixed_pattern)
print("=" * 80)

for text in texts:
    print(f"\nТекст: '{text}'")
    matches = list(re.finditer(fixed_pattern, text, re.IGNORECASE))
    if matches:
        for m in matches:
            print(f"  ✅ Найдено: '{m.group()}'")
    else:
        print(f"  ❌ НЕ НАЙДЕНО")
